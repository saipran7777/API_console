(function(mod){if("object"==("undefined"===typeof exports?"undefined":babelHelpers.typeof(exports))&&"object"==("undefined"===typeof module?"undefined":babelHelpers.typeof(module)))mod(require("../../lib/codemirror"),require("../javascript/javascript"));else if("function"==typeof define&&define.amd)define(["../../lib/codemirror","../javascript/javascript"],mod);else mod(CodeMirror)})(function(CodeMirror){"use strict";CodeMirror.defineMode("pegjs",function(config){var jsMode=CodeMirror.getMode(config,"javascript");function identifier(stream){return stream.match(/^[a-zA-Z_][a-zA-Z0-9_]*/)}return{startState:function startState(){return{inString:!1,stringType:null,inComment:!1,inCharacterClass:!1,braced:0,lhs:!0,localState:null}},token:function(stream,state){if(stream)if(!state.inString&&!state.inComment&&("\""==stream.peek()||"'"==stream.peek())){state.stringType=stream.peek();stream.next();state.inString=!0}if(!state.inString&&!state.inComment&&stream.match(/^\/\*/)){state.inComment=!0}if(state.inString){while(state.inString&&!stream.eol()){if(stream.peek()===state.stringType){stream.next();state.inString=!1}else if("\\"===stream.peek()){stream.next();stream.next()}else{stream.match(/^.[^\\\"\']*/)}}return state.lhs?"property string":"string"}else if(state.inComment){while(state.inComment&&!stream.eol()){if(stream.match(/\*\//)){state.inComment=!1}else{stream.match(/^.[^\*]*/)}}return"comment"}else if(state.inCharacterClass){while(state.inCharacterClass&&!stream.eol()){if(!(stream.match(/^[^\]\\]+/)||stream.match(/^\\./))){state.inCharacterClass=!1}}}else if("["===stream.peek()){stream.next();state.inCharacterClass=!0;return"bracket"}else if(stream.match(/^\/\//)){stream.skipToEnd();return"comment"}else if(state.braced||"{"===stream.peek()){if(null===state.localState){state.localState=CodeMirror.startState(jsMode)}var token=jsMode.token(stream,state.localState),text=stream.current();if(!token){for(var i=0;i<text.length;i++){if("{"===text[i]){state.braced++}else if("}"===text[i]){state.braced--}}}return token}else if(identifier(stream)){if(":"===stream.peek()){return"variable"}return"variable-2"}else if(-1!=["[","]","(",")"].indexOf(stream.peek())){stream.next();return"bracket"}else if(!stream.eatSpace()){stream.next()}return null}}},"javascript")});